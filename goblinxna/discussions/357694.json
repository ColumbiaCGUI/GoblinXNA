[
  {
    "Id": "842655",
    "ThreadId": "357694",
    "Html": "\r\n<p>Hi, I am trying to use Goblin XNA to measure distances between related corners on square AR markers.</p>\r\n<p>At the moment my test consists of 4 markers in a square grid on a piece of paper. The distances I am getting are relatively accurate when the paper is facing the webcam directly, however accuracy seems to drop when the paper angle is changed. The distances\r\n measured always seem to be too high.&nbsp;</p>\r\n<p>I was wondering if there is something wrong with the camera model I am using to estimate the distance. The tracking seems to &nbsp;work relatively well, the corners projected onto the screen using the pose transform match up with those in the webcam image.&nbsp;</p>\r\n<p>The steps I have taken so far:</p>\r\n<p>1. Calibration from 50 images (I am using GML toolkit and manually creating the calib.xml in the format specified).</p>\r\n<p>2. Obtain Pose transform matrix using ALVAR via GoblinXNA</p>\r\n<p>3. Project into 3D space the marker corners:</p>\r\n<p></p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre><span style=\"color:green\">//Corner model, edgeLength = 8mm</span>\r\nVector3[] modelCorners = <span style=\"color:blue\">new</span> Vector3[]\r\n{\r\n      <span style=\"color:blue\">new</span> Vector3(-edgeLength/2,edgeLength/2,0),\r\n      <span style=\"color:blue\">new</span> Vector3(-edgeLength/2,-edgeLength/2,0),\r\n      <span style=\"color:blue\">new</span> Vector3(edgeLength/2,-edgeLength/2,0),\r\n      <span style=\"color:blue\">new</span> Vector3(edgeLength/2,edgeLength/2,0)\r\n};\r\n\r\n<span style=\"color:green\">//i is the marker ID, j is the corner (0 to 3), markerMatrices stores Matrix transform obtained from ALVAR</span>\r\nmarker3dProjected[i, j] = (Matrix.CreateTranslation(modelCorners[j]) * markerMatrices[i]).Translation;\r\n</pre>\r\n</div>\r\n<p></p>\r\n<p>4. Work out distance between corners:</p>\r\n<p></p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre><span style=\"color:green\">//i = marker 1, m = marker 2, corner = cornerID (0 to 3)</span>\r\nVector3.Distance(marker3dProjected[i,cornerscan],marker3dProjected[m,corner])\r\n</pre>\r\n</div>\r\n<p></p>\r\n<p>Any tips on how to improve the accuracy of the measurements?</p>\r\n<p>Also is there any way to obtain the error value for detection from ALVAR?</p>\r\n",
    "PostedDate": "2012-05-30T10:23:42.453-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]