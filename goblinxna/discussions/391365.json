[
  {
    "Id": "898828",
    "ThreadId": "391365",
    "Html": "\r\n<p>Hello everyone!</p>\r\n<p>I have a question about the marker detector in ALVAR 2.0.0. I want to detect markers in a single image. My question is as follows:</p>\r\n<p>I load an image with 21 detectable markers, and the output of function &quot;<span style=\"font-size:9.5pt\">marker_detector.Detect(image, &amp;cam,\r\n<span style=\"color:blue\">false</span>, <span style=\"color:blue\">true</span>)&quot; is 21, but why the &quot;marker_detector.markers-&gt;size()&quot; is 6?</span></p>\r\n<p><span style=\"font-size:9.5pt\">I looked at the source code of MarkerDetector.cpp, and I think these two outputs should be the same, since each visualized marker is pushed back into the vector.</span></p>\r\n<p><span style=\"font-size:9.5pt\">Why only 6 markers are pushed into the vector &quot;marker&quot;?</span></p>\r\n<p><span style=\"font-size:9.5pt\">Thank you very much for your help!</span></p>\r\n<p><span style=\"font-size:9.5pt\">Best regards</span></p>\r\n<p><span style=\"font-size:9.5pt\">Jiaxiang Zhang</span></p>\r\n<p><span style=\"font-size:9.5pt\">Rensselaer polytechnic institute</span></p>\r\n<p><span style=\"font-size:9.5pt\">&nbsp;</span></p>\r\n<p><span style=\"font-size:9.5pt\">In the following is my code:</span></p>\r\n<p><span style=\"font-size:9.5pt\">&nbsp;</span></p>\r\n<p><span style=\"font-size:9.5pt; color:blue\">#include</span><span style=\"font-size:9.5pt\">\r\n<span style=\"color:#a31515\">&quot;stdafx.h&quot;</span></span></p>\r\n<p><span style=\"font-size:9.5pt; color:blue\">#include</span><span style=\"font-size:9.5pt\">\r\n<span style=\"color:#a31515\">&quot;cv.h&quot;</span> </span></p>\r\n<p><span style=\"font-size:9.5pt; color:blue\">#include</span><span style=\"font-size:9.5pt\">\r\n<span style=\"color:#a31515\">&quot;cxcore.h&quot;</span> </span></p>\r\n<p><span style=\"font-size:9.5pt; color:blue\">#include</span><span style=\"font-size:9.5pt\">\r\n<span style=\"color:#a31515\">&quot;highgui.h&quot;</span> </span></p>\r\n<p><span style=\"font-size:9.5pt; color:blue\">#include</span><span style=\"font-size:9.5pt\">\r\n<span style=\"color:#a31515\">&quot;MarkerDetector.h&quot;</span></span></p>\r\n<p><span style=\"font-size:9.5pt; color:blue\">#include</span><span style=\"font-size:9.5pt\">\r\n<span style=\"color:#a31515\">&lt;iostream&gt;</span></span></p>\r\n<p><span style=\"font-size:9.5pt; color:blue\">#include</span><span style=\"font-size:9.5pt\">\r\n<span style=\"color:#a31515\">&quot;Camera.h&quot;</span></span></p>\r\n<p><span style=\"font-size:9.5pt; color:blue\">using</span><span style=\"font-size:9.5pt\">\r\n<span style=\"color:blue\">namespace</span> cv;</span></p>\r\n<p><span style=\"font-size:9.5pt; color:blue\">using</span><span style=\"font-size:9.5pt\">\r\n<span style=\"color:blue\">namespace</span> alvar;</span></p>\r\n<p><span style=\"font-size:9.5pt; color:blue\">using</span><span style=\"font-size:9.5pt\">\r\n<span style=\"color:blue\">namespace</span> std;</span></p>\r\n<p><span style=\"font-size:9.5pt; color:blue\">int</span><span style=\"font-size:9.5pt\"> _tmain(<span style=\"color:blue\">int</span> argc,\r\n<span style=\"color:blue\">char</span>* argv[])</span></p>\r\n<p><span style=\"font-size:9.5pt\">{</span></p>\r\n<p><span style=\"font-size:9.5pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:green\">\r\n//load image</span></span></p>\r\n<p><span style=\"font-size:9.5pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IplImage* image = cvLoadImage(\r\n<span style=\"color:#a31515\">&quot;MyImage.bmp&quot;</span> );</span></p>\r\n<p><span style=\"font-size:9.5pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">\r\nbool</span> flip_image = (image-&gt;origin?<span style=\"color:blue\">true</span>:<span style=\"color:blue\">false</span>);</span></p>\r\n<p><span style=\"font-size:9.5pt\">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; <span style=\"color:blue\">\r\nif</span> (flip_image) {</span></p>\r\n<p><span style=\"font-size:9.5pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cvFlip(image);</span></p>\r\n<p><span style=\"font-size:9.5pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; image-&gt;origin = !image-&gt;origin;</span></p>\r\n<p><span style=\"font-size:9.5pt\">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; }</span></p>\r\n<p><span style=\"font-size:9.5pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:green\">\r\n//initialize cam</span></span></p>\r\n<p><span style=\"font-size:9.5pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">\r\nchar</span> calibrationFilename[] = <span style=\"color:#a31515\">&quot;default_calib.xml&quot;</span>;<span style=\"color:green\">//the .xml is modified to match the webcam</span></span></p>\r\n<p><span style=\"font-size:9.5pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Camera cam;</span></p>\r\n<p><span style=\"font-size:9.5pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">\r\nif</span> (cam.SetCalib(calibrationFilename, image-&gt;width, image-&gt;height))</span></p>\r\n<p><span style=\"font-size:9.5pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {cout&lt;&lt;<span style=\"color:#a31515\">&quot;camera calibration file loaded&quot;</span>&lt;&lt;endl; }</span></p>\r\n<p><span style=\"font-size:9.5pt\">&nbsp;</span></p>\r\n<p><span style=\"font-size:9.5pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:green\">\r\n//initialize marker detector</span></span></p>\r\n<p><span style=\"font-size:9.5pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MarkerDetector&lt;MarkerData&gt; marker_detector;</span></p>\r\n<p><span style=\"font-size:9.5pt\">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; marker_detector.SetMarkerSize(1, 5, 1.7);<span style=\"color:green\"> //my marker resolution is 5x5</span></span></p>\r\n<p><span style=\"font-size:9.5pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:green\">\r\n//these two output does not match, why?</span></span></p>\r\n<p><span style=\"font-size:9.5pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; std::cout&lt;&lt;<span style=\"color:#a31515\">&quot;1. detected markers: &quot;</span>&lt;&lt;marker_detector.Detect(image, &amp;cam,\r\n<span style=\"color:blue\">false</span>, <span style=\"color:blue\">true</span>)&lt;&lt;endl;</span></p>\r\n<p><span style=\"font-size:9.5pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; std::cout&lt;&lt;<span style=\"color:#a31515\">&quot;2. marker vector size: &quot;</span>&lt;&lt;marker_detector.markers-&gt;size()&lt;&lt;endl;</span></p>\r\n<p><span style=\"font-size:9.5pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:green\">\r\n//display the image with red cubes, which is corect</span></span></p>\r\n<p><span style=\"font-size:9.5pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cvNamedWindow(<span style=\"color:#a31515\">&quot;Example1&quot;</span>, CV_WINDOW_AUTOSIZE );</span></p>\r\n<p><span style=\"font-size:9.5pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cvShowImage(<span style=\"color:#a31515\">&quot;Example1&quot;</span>, image);</span></p>\r\n<p><span style=\"font-size:9.5pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cvWaitKey(0);</span></p>\r\n<p><span style=\"font-size:9.5pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cvReleaseImage( &amp;image );</span></p>\r\n<p><span style=\"font-size:9.5pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cvDestroyWindow(\r\n<span style=\"color:#a31515\">&quot;Example1&quot;</span> );</span></p>\r\n<p><span style=\"font-size:9.5pt\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">\r\nreturn</span> 0;</span></p>\r\n<p><span style=\"font-size:9.5pt\">}</span></p>\r\n<p><span style=\"font-size:9.5pt\">And here is the output of the code:</span></p>\r\n<p><span>1. detected markers: &nbsp;21</span></p>\r\n<p><span><span>2. marker vector size: 6</span><br>\r\n</span></p>\r\n",
    "PostedDate": "2012-08-13T09:30:20.917-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "898931",
    "ThreadId": "391365",
    "Html": "<p>You should send ALVAR related questions to VTT. We do not develop ALVAR.</p>\r\n<p>Ohan</p>",
    "PostedDate": "2012-08-13T15:17:49.753-07:00",
    "UserRole": "Owner",
    "MarkedAsAnswerDate": null
  }
]